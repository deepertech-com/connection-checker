!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/home/xoxefdp/WORKSPACE/PROJECTS/CONNECTION_CHECKER/connection-checker/dist",n(n.s=1)}([function(e,t){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/home/xoxefdp/WORKSPACE/PROJECTS/CONNECTION_CHECKER/the-type-validator/dist",n(n.s=0)}([function(e,n,r){"use strict";r.r(n);const o=e=>"number"==typeof e&&!isNaN(e)&&e===Number(e)&&(e=>Number.isSafeInteger(e)&&e<Number.MAX_VALUE&&e>Number.MIN_VALUE)(e),i=e=>Array.isArray(e)&&"[object Array]"===toString.call(e),c=e=>i(e)&&0===e.length,s=e=>"object"==typeof e&&"[object Object]"===toString.call(e),l=e=>{let t=null;if(s(e)){for(const n in e)e.hasOwnProperty(n)&&(t=!1);t=!0}return t};t.isNull=e=>null===e&&"[object Null]"===toString.call(e),t.isUndefined=e=>void 0===e&&"[object Undefined]"===toString.call(e),t.isFunction=e=>"function"==typeof e&&"[object Function]"===toString.call(e),t.isString=e=>"string"==typeof e&&"[object String]"===toString.call(e),t.isNumber=o,t.isInteger=e=>o(e)&&Number.isInteger(e),t.isFloat=e=>o(e)&&e%1!=0,t.isArray=i,t.isEmptyArray=c,t.isObject=s,t.isPlainObject=e=>{if(!s(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},t.isEmptyObject=l,t.isPromise=e=>!(!e||"function"!=typeof e.then||"function"!=typeof e.catch||"function"!=typeof e.finally),t.isEmpty=e=>c(e)||l(e)}])},function(e,t,n){"use strict";n.r(t);var r={CONNECTED:"CONNECTED",DISCONNECTED:"DISCONNECTED"};var o={ON_NETWORK_CHECKING:"onNetworkChecking",ON_NETWORK_CHANGED:"onNetworkChanged",ON_NETWORK_CONNECTED:"onNetworkConnected",ON_NETWORK_DISCONNECTED:"onNetworkDisconnected"};const i=[{url:"https://www.google.com",method:"HEAD"},{url:"https://yandex.ru",method:"HEAD"},{url:"https://www.baidu.com",method:"HEAD"}];var c=n(0);let s=null,l=null,u=null,a=null,h=null;const N=e=>{s=e},d=()=>u,f=()=>a,p=()=>h;class C{constructor(){this.networkState=null,this.checkerInterval=null,this.fetchTimeout=d()?d():2e3,this.intervalTime=f()?f():1e4,this.internetResources=p()?p():i}_checkNetwork(){this._dispatchNetworkChecking();const e=btoa(Date.now()),t=[];let n=Promise.reject(),o=null;if(Object(c.isObject)(this.internetResources)?o=void 0!==this.internetResources.url&&void 0!==this.internetResources.method?[this.internetResources]:null:Object(c.isArray)(this.internetResources)&&(o=this.internetResources),Object(c.isNull)(o)||Object(c.isString)(o))console.error("Wrong user provided internet resource"),this._evaluateNetwork(r.DISCONNECTED);else{for(let n=0;n<o.length;n++){const r=o[n].url,i=o[n].method,c=fetch(`${r}/?nc=${e}`,{method:i,mode:"cors",timeout:this.fetchTimeout});t.push(c)}n=Promise.allSettled(t).then(e=>{let t=0;for(let n=0;n<e.length;n++)"rejected"===e[n].status&&t++;const n=t===e.length;t>0&&e.length;n?this._evaluateNetwork(r.DISCONNECTED):this._evaluateNetwork(r.CONNECTED)})}return n}_getNetworkState(){return this.networkState}_setNetworkState(e){this.networkState=e}_resetState(){this._setNetworkState(null)}_hasNetworkChanged(e){return this._getNetworkState()!==e}_evaluateNetwork(e){this._hasNetworkChanged(e)&&this._dispatchNetworkChanged(e)}_dispatchNetworkChecking(){window.dispatchEvent(new Event(o.ON_NETWORK_CHECKING))}_dispatchNetworkChanged(e){var t;window.dispatchEvent((t={from:this._getNetworkState(),to:e},new CustomEvent(o.ON_NETWORK_CHANGED,{detail:t}))),e===r.CONNECTED?this._dispatchNetworkConnected():this._dispatchNetworkDisconnected()}_dispatchNetworkConnected(){this._setNetworkState(r.CONNECTED),N(this._getNetworkState()),window.dispatchEvent(new Event(o.ON_NETWORK_CONNECTED))}_dispatchNetworkDisconnected(){this._setNetworkState(r.DISCONNECTED),N(this._getNetworkState()),window.dispatchEvent(new Event(o.ON_NETWORK_DISCONNECTED))}_isCheckerActive(){return!!this.checkerInterval}_startConnectionChecker(){this._isCheckerActive()||(this.checkerInterval=setInterval(()=>{this._checkNetwork()},this.intervalTime))}_stopConnectionChecker(){this._isCheckerActive()&&(clearInterval(this.checkerInterval),this._resetState())}_checkConnectionOnDemand(){return this._checkNetwork()}}const O=()=>!!l;exports.ConnectionState=r,exports.ConnectionEvent=o,exports.getConnectionState=()=>s,exports.changeTimeout=(e=null)=>{u=e},exports.changeInterval=(e=null)=>{a=e},exports.changeInternetResource=(e=null)=>{h=e},exports.isCheckerActive=O,exports.startChecker=()=>{O()||(N(null),l=new C,l._startConnectionChecker())},exports.stopChecker=()=>{O()&&(l._stopConnectionChecker(),l=null)},exports.checkOnDemand=()=>{let e=new C;e._checkConnectionOnDemand().finally(()=>{e=null})}}]);